newman

Stream Processing Homework

→ Create user
  POST http://arch.homework:8000/users  
  201 Created ★ 102ms time ★ 357B↑ 197B↓ size ★ 9↑ 4↓ headers ★ 0 cookies
  ┌ ↑ raw ★ 69B
  │ {
  │   "email": "user1764499884656@example.com",
  │   "name": "Demo User"
  │ }
  └ 
  ┌ ↓ application/json ★ text ★ json ★ utf8 ★ 67B
  │ {"id":1,"email":"user1764499884656@example.com","name"
  │ :"Demo User"}
  └
  prepare   wait   dns-lookup   tcp-handshake   transfer-start   download   process   total 
  5ms       5ms    2ms          328µs           87ms             5ms        161µs     106ms 

  ✓  created

→ Check billing account
  GET http://arch.homework:8001/accounts/1  
  200 OK ★ 6ms time ★ 240B↑ 152B↓ size ★ 7↑ 4↓ headers ★ 0 cookies
  ┌ ↓ application/json ★ text ★ json ★ utf8 ★ 27B
  │ {"user_id":1,"balance":0.0}
  └
  prepare   wait    dns-lookup   tcp-handshake   transfer-start   download   process   total 
  369µs     352µs   1ms          448µs           3ms              728µs      29µs      6ms   

  ✓  account exists
  ✓  balance zero

→ Deposit funds
  POST http://arch.homework:8001/accounts/1/deposit  
  200 OK ★ 8ms time ★ 320B↑ 154B↓ size ★ 9↑ 4↓ headers ★ 0 cookies
  ┌ ↑ raw ★ 19B
  │ {
  │   "amount": 100
  │ }
  └ 
  ┌ ↓ application/json ★ text ★ json ★ utf8 ★ 29B
  │ {"user_id":1,"balance":100.0}
  └
  prepare   wait    dns-lookup   tcp-handshake   transfer-start   download   process   total 
  320µs     252µs   (cache)      (cache)         6ms              479µs      30µs      7ms   

  ✓  deposit ok

→ Create order success
  POST http://arch.homework:8003/orders  
  201 Created ★ 109ms time ★ 322B↑ 342B↓ size ★ 9↑ 4↓ headers ★ 0 cookies
  ┌ ↑ raw ★ 33B
  │ {
  │   "user_id": 1,
  │   "price": 50
  │ }
  └ 
  ┌ ↓ application/json ★ text ★ json ★ utf8 ★ 211B
  │ {"id":1,"user_id":1,"price":50.0,"status":"confirmed",
  │ "message":"Письмо счастья: заказ на сумму 50.0 подтвер
  │ жден. Баланс 50.0","created_at":"2025-11-30T10:51:24.9
  │ 24599"}
  └
  prepare   wait    dns-lookup   tcp-handshake   transfer-start   download   process   total 
  288µs     250µs   942µs        297µs           106ms            500µs      23µs      109ms 

  ✓  order accepted
  ✓  status confirmed

→ Check balance after success
  GET http://arch.homework:8001/accounts/1  
  200 OK ★ 3ms time ★ 240B↑ 153B↓ size ★ 7↑ 4↓ headers ★ 0 cookies
  ┌ ↓ application/json ★ text ★ json ★ utf8 ★ 28B
  │ {"user_id":1,"balance":50.0}
  └
  prepare   wait    dns-lookup   tcp-handshake   transfer-start   download   process   total 
  293µs     169µs   (cache)      (cache)         2ms              425µs      24µs      3ms   

  ✓  withdraw applied

→ Check notifications success
  GET http://arch.homework:8002/notifications?user_id=1  
  200 OK ★ 6ms time ★ 253B↑ 417B↓ size ★ 7↑ 4↓ headers ★ 0 cookies
  ┌ ↓ application/json ★ text ★ json ★ utf8 ★ 291B
  │ {"items":[{"id":1,"user_id":1,"email":"user17644998846
  │ 56@example.com","subject":"Результат оформления заказа
  │ ","body":"Письмо счастья: заказ на сумму 50.0 подтверж
  │ ден. Баланс 50.0","created_at":"2025-11-30T10:51:24.90
  │ 3948"}]}
  └
  prepare   wait    dns-lookup   tcp-handshake   transfer-start   download   process   total 
  461µs     240µs   944µs        395µs           3ms              350µs      29µs      6ms   

  ✓  notifications listed
  ✓  at least one notification
  ✓  happiness letter

→ Create order fail
  POST http://arch.homework:8003/orders  
  201 Created ★ 14ms time ★ 322B↑ 319B↓ size ★ 9↑ 4↓ headers ★ 0 cookies
  ┌ ↑ raw ★ 33B
  │ {
  │   "user_id": 1,
  │   "price": 80
  │ }
  └ 
  ┌ ↓ application/json ★ text ★ json ★ utf8 ★ 188B
  │ {"id":2,"user_id":1,"price":80.0,"status":"failed","me
  │ ssage":"Письмо горя: не удалось списать 80.0. Insuffic
  │ ient funds","created_at":"2025-11-30T10:51:24.995322"}
  └
  prepare   wait    dns-lookup   tcp-handshake   transfer-start   download   process   total 
  256µs     133µs   (cache)      (cache)         13ms             364µs      20µs      14ms  

  ✓  order processed
  ✓  status failed

→ Balance unchanged after fail
  GET http://arch.homework:8001/accounts/1  
  200 OK ★ 3ms time ★ 240B↑ 153B↓ size ★ 7↑ 4↓ headers ★ 0 cookies
  ┌ ↓ application/json ★ text ★ json ★ utf8 ★ 28B
  │ {"user_id":1,"balance":50.0}
  └
  prepare   wait    dns-lookup   tcp-handshake   transfer-start   download   process   total 
  232µs     128µs   (cache)      (cache)         1ms              197µs      15µs      2ms   

  ✓  balance not changed

→ Notifications after fail
  GET http://arch.homework:8002/notifications?user_id=1  
  200 OK ★ 4ms time ★ 253B↑ 677B↓ size ★ 7↑ 4↓ headers ★ 0 cookies
  ┌ ↓ application/json ★ text ★ json ★ utf8 ★ 551B
  │ {"items":[{"id":1,"user_id":1,"email":"user17644998846
  │ 56@example.com","subject":"Результат оформления заказа
  │ ","body":"Письмо счастья: заказ на сумму 50.0 подтверж
  │ ден. Баланс 50.0","created_at":"2025-11-30T10:51:24.90
  │ 3948"},{"id":2,"user_id":1,"email":"user1764499884656@
  │ example.com","subject":"Результат оформления заказа","
  │ body":"Письмо горя: не удалось списать 80.0. Insuffici
  │ ent funds","created_at":"2025-11-30T10:51:24.990997"}]
  │ }
  └
  prepare   wait    dns-lookup   tcp-handshake   transfer-start   download   process   total 
  278µs     147µs   (cache)      (cache)         2ms              386µs      21µs      3ms   

  ✓  notifications returned
  ✓  new notification
  ✓  sad letter

┌─────────────────────────┬────────────────────┬───────────────────┐
│                         │           executed │            failed │
├─────────────────────────┼────────────────────┼───────────────────┤
│              iterations │                  1 │                 0 │
├─────────────────────────┼────────────────────┼───────────────────┤
│                requests │                  9 │                 0 │
├─────────────────────────┼────────────────────┼───────────────────┤
│            test-scripts │                  9 │                 0 │
├─────────────────────────┼────────────────────┼───────────────────┤
│      prerequest-scripts │                  1 │                 0 │
├─────────────────────────┼────────────────────┼───────────────────┤
│              assertions │                 16 │                 0 │
├─────────────────────────┴────────────────────┴───────────────────┤
│ total run duration: 381ms                                        │
├──────────────────────────────────────────────────────────────────┤
│ total data received: 1.42kB (approx)                             │
├──────────────────────────────────────────────────────────────────┤
│ average response time: 28ms [min: 3ms, max: 109ms, s.d.: 41ms]   │
├──────────────────────────────────────────────────────────────────┤
│ average DNS lookup time: 1ms [min: 942µs, max: 2ms, s.d.: 450µs] │
├──────────────────────────────────────────────────────────────────┤
│ average first byte time: 25ms [min: 1ms, max: 106ms, s.d.: 38ms] │
└──────────────────────────────────────────────────────────────────┘
